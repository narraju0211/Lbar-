<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overlay de Patrocínio L-Bar</title>
    <style>
        /* Variáveis CSS para customização */
        :root {
            --l-bar-base-bg-color: rgba(0, 0, 0, 0.7); /* Cor de fundo padrão se não houver imagem */
            --l-bar-border-color: #00f; /* Cor da borda */
            --text-color: #fff; /* Cor do texto */
            --animation-duration: 0.3s;
            --logo-font-size: 2.5em; /* Fonte maior para o nome da empresa */
            --info-font-size: 1.4em; /* Fonte maior para as informações */
            --font-family-display: 'Impact', sans-serif; /* Fonte mais chamativa */
            --shadow-strong: 3px 3px 6px rgba(0, 0, 0, 0.9); /* Sombra mais forte para destaque */
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: transparent;
            font-family: var(--font-family-display); /* Aplica a fonte chamativa */
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: flex-start;
            align-items: flex-end;
        }

        .l-bar-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Permite cliques através da overlay quando invisível */
            opacity: 0;
            transition: opacity var(--animation-duration) ease-in-out;
            z-index: 100;
        }

        .l-bar-container.active {
            opacity: 1;
        }

        .l-bar {
            position: absolute;
            background-color: var(--l-bar-base-bg-color); /* Fundo padrão */
            border: 1px solid var(--l-bar-border-color);
            box-sizing: border-box;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5); /* Sombra neon */
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            color: var(--text-color); /* Cor do texto padrão */
        }

        .l-bar.left {
            width: 350px; /* Largura ajustada para mais destaque */
            height: calc(100% - 180px); /* Altura ajustada para combinar com a inferior */
            top: 0;
            left: 0;
            padding: 20px; /* Mais padding para o conteúdo */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centralizar verticalmente o conteúdo */
            align-items: center; /* Centralizar horizontalmente o conteúdo */
            text-align: center;
            gap: 20px; /* Espaço maior entre os blocos de texto */
        }

        .l-bar.left div {
            text-shadow: var(--shadow-strong); /* Aplica sombra forte a todos os textos */
            line-height: 1.2;
            word-break: break-word; /* Garante quebras de linha em palavras longas */
        }

        .l-bar.left .logo-text {
            font-size: var(--logo-font-size);
            font-weight: bold;
            text-transform: uppercase; /* Opcional: para o nome da empresa */
        }

        .l-bar.left .segment-info {
            font-size: var(--info-font-size);
            font-style: italic;
        }

        .l-bar.left .contact-info {
            font-size: var(--info-font-size);
            font-weight: bold;
        }

        .l-bar.bottom {
            height: 180px; /* Altura ajustada */
            width: 100%;
            bottom: 0;
            left: 0;
            display: flex;
            justify-content: space-around; /* Distribui as imagens uniformemente */
            align-items: center;
            padding: 10px; /* Padding interno */
            gap: 10px; /* Espaço entre as imagens */
        }

        .l-bar.bottom img {
            max-height: 95%; /* Quase ocupa toda a altura da barra */
            object-fit: contain; /* Garante que a imagem se ajuste sem cortar */
            width: auto; /* Largura automática para manter a proporção */
            max-width: 32%; /* Limita a largura de cada imagem para que caibam 3 */
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="l-bar-container" id="lBarContainer">
        <div class="l-bar left" id="lBarLeft">
            <div class="logo-text" id="leftLogoText"></div>
            <div class="segment-info" id="leftSegmentInfo"></div>
            <div class="contact-info" id="leftContactInfo"></div>
        </div>
        <div class="l-bar bottom" id="lBarBottom">
            <img id="bottomImageDisplay1" src="" alt="">
            <img id="bottomImageDisplay2" src="" alt="">
            <img id="bottomImageDisplay3" src="" alt="">
        </div>
    </div>

    <script>
        // ** SEU FIREBASE CONFIG ESTÁ AQUI **
        const firebaseConfig = {
          apiKey: "AIzaSyAFp_iujrtqjiTU5yq2yNSBIpwgjQZZyns",
          authDomain: "aquilesplacarpro.firebaseapp.com",
          databaseURL: "https://aquilesplacarpro-default-rtdb.firebaseio.com",
          projectId: "aquilesplacarpro",
          storageBucket: "aquilesplacarpro.firebasestorage.app",
          messagingSenderId: "922321609151",
          appId: "1:922321609151:web:ba51f5b21b322cf0a4c10a"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const sponsorStateRef = database.ref('sponsorOverlayState');

        const lBarContainer = document.getElementById('lBarContainer');
        const lBarLeft = document.getElementById('lBarLeft');
        const lBarBottom = document.getElementById('lBarBottom');

        const leftLogoText = document.getElementById('leftLogoText');
        const leftSegmentInfo = document.getElementById('leftSegmentInfo');
        const leftContactInfo = document.getElementById('leftContactInfo');

        const bottomImageDisplay1 = document.getElementById('bottomImageDisplay1');
        const bottomImageDisplay2 = document.getElementById('bottomImageDisplay2');
        const bottomImageDisplay3 = document.getElementById('bottomImageDisplay3');

        let sponsorOverlayState = {
            isVisible: false,
            leftSponsor: {},
            bottomSponsorImages: []
        };

        document.addEventListener('DOMContentLoaded', () => {
            sponsorStateRef.on('value', (snapshot) => {
                if (snapshot.exists()) {
                    sponsorOverlayState = snapshot.val();
                    renderOverlay();
                } else {
                    sponsorOverlayState = { isVisible: false, leftSponsor: {}, bottomSponsorImages: [] };
                    renderOverlay();
                }
            }, (error) => {
                console.error("Erro ao ler dados do Firebase:", error);
            });
        });

        function renderOverlay() {
            lBarContainer.classList.toggle('active', sponsorOverlayState.isVisible);

            // Background para ambas as barras
            const leftBgImage = sponsorOverlayState.leftSponsor?.backgroundImage || '';
            const leftBgOpacity = sponsorOverlayState.leftSponsor?.backgroundOpacity !== undefined ? sponsorOverlayState.leftSponsor.backgroundOpacity : 1;

            if (leftBgImage) {
                lBarLeft.style.backgroundImage = `url('${leftBgImage}')`;
                lBarBottom.style.backgroundImage = `url('${leftBgImage}')`;
            } else {
                lBarLeft.style.backgroundImage = 'none';
                lBarBottom.style.backgroundImage = 'none';
            }
            lBarLeft.style.opacity = leftBgOpacity;
            lBarBottom.style.opacity = leftBgOpacity;

            // Conteúdo da Barra Lateral Esquerda
            leftLogoText.textContent = sponsorOverlayState.leftSponsor?.logoText || ''; // Pega o texto da logo
            leftSegmentInfo.textContent = sponsorOverlayState.leftSponsor?.segmentInfo || '';
            leftContactInfo.textContent = sponsorOverlayState.leftSponsor?.contactInfo || '';

            // Imagens da Barra Inferior
            bottomImageDisplay1.src = sponsorOverlayState.bottomSponsorImages?.[0] || '';
            bottomImageDisplay2.src = sponsorOverlayState.bottomSponsorImages?.[1] || '';
            bottomImageDisplay3.src = sponsorOverlayState.bottomSponsorImages?.[2] || '';

            // Exibe ou esconde as imagens conforme elas existam
            bottomImageDisplay1.style.display = bottomImageDisplay1.src ? 'block' : 'none';
            bottomImageDisplay2.style.display = bottomImageDisplay2.src ? 'block' : 'none';
            bottomImageDisplay3.style.display = bottomImageDisplay3.src ? 'block' : 'none';
        }
    </script>
</body>
</html>
